<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Libralinks - Find Libraries</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .hero-bg { background: linear-gradient(180deg,#eef6ff 0%, #ffffff 100%); }
    .input-shadow { box-shadow: 0 10px 20px rgba(99,102,241,0.12); }
  </style>
</head>
<body class="hero-bg min-h-screen">
  <header class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white">
    <div class="max-w-7xl mx-auto px-6 py-6 flex items-center justify-between">
      <div class="text-3xl font-extrabold">Libralinks</div>
      <nav class="space-x-6">
        <a class="opacity-90 hover:opacity-100">Summary</a>
        <a class="opacity-90 hover:opacity-100">Features</a>
        <a class="opacity-90 hover:opacity-100">Team</a>
        <a class="opacity-90 hover:opacity-100">FAQ</a>
        <a class="opacity-90 hover:opacity-100">Contact</a>
      </nav>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-6 py-20 text-center">
    <h1 class="text-6xl font-extrabold text-slate-900 leading-tight">Helping readers find libraries near them<br>with one simple search.</h1>
    <p class="mt-6 text-xl text-slate-600">Connect. Learn. Grow. ðŸ“š Your gateway to ideas and opportunity.</p>

    <div class="mt-12 flex items-center justify-center gap-6">
      <input id="q" class="w-2/5 p-4 rounded-xl border border-indigo-200 placeholder-slate-400 input-shadow" placeholder="Search by State, City, or ZIP code" />
      <button id="go" class="px-8 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl shadow-lg">Find My Library</button>
    </div>

    <div id="results" class="mt-10 max-w-3xl mx-auto text-left"></div>
  </main>

  <script>
    function createCard(item) {
      const div = document.createElement('div');
      div.className = 'bg-white rounded-2xl p-6 mb-4 shadow';
      div.innerHTML = `<div class="text-lg font-bold">${item.name}</div>
                       <div class="mt-2 text-slate-700">${item.address}</div>
                       <div class="mt-1 text-slate-500">${item.city || ''} ${item.state || ''} ${item.postalCode || ''}</div>`;
      return div;
    }

    async function search() {
      const q = document.getElementById('q').value.trim();
      const btn = document.getElementById('go');
      const results = document.getElementById('results');
      results.innerHTML = '';
      if (!q) {
        results.innerHTML = '<div class="text-center text-slate-500">Please enter a ZIP or city.</div>';
        return;
      }
      btn.disabled = true;
      try {
        const res = await fetch('/api/libraries/search?q=' + encodeURIComponent(q));
        const data = await res.json();
        if (!res.ok) {
          results.innerHTML = `<div class="text-center text-red-500">${data.error || 'Invalid input'}</div>`;
        } else {
          if (!Array.isArray(data.results) || data.results.length === 0) {
            results.innerHTML = '<div class="text-center text-slate-500">No results found.</div>';
          } else {
            data.results.forEach(item => results.appendChild(createCard(item)));
          }
        }
      } catch (e) {
        results.innerHTML = '<div class="text-center text-red-500">Error fetching results.</div>';
      } finally {
        btn.disabled = false;
      }
    }

    document.getElementById('go').addEventListener('click', search);
    document.getElementById('q').addEventListener('keydown', (e) => { if (e.key === 'Enter') search(); });
  </script>
</body>
</html>
